(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,n){e.exports=n(319)},305:function(e,t,n){},308:function(e,t,n){},310:function(e,t,n){},312:function(e,t,n){},314:function(e,t,n){},316:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(113),o=n.n(c),u=n(15),s=n.n(u),i=n(16),l={REGION:"us-west-1",URL:"https://fbj97y4ndj.execute-api.us-west-1.amazonaws.com/prod"},h={REGION:"us-west-2",USER_POOL_ID:"us-west-2_f9b0JeeMD",APP_CLIENT_ID:"7st7lq4rb5iuqc5uj3bcttimmo",IDENTITY_POOL_ID:"us-west-2:54671dce-0a57-4b44-a212-1d8cf1b2f359"},d=n(18),E=n(116),f=function(e){return{type:"SET_AUTHENTICATED",status:e}},p=function(){return{type:"LOAD_SESSION_REQUESTED"}},O=function(){return{type:"LOAD_SESSION_COMPLETED"}},b=function(){return{type:"LOGIN_SUCCESS"}},m=function(){return{type:"LOGIN_FAILURE"}},v=function(){return{type:"LOGOUT_SUCCESS"}},g=function(e){return{type:"SAVE_USER_INFO",info:e}},S=Object(d.c)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"LOAD_SESSION_REQUESTED":return!0;case"LOAD_SESSION_COMPLETED":return!1;default:return e}},authenticated:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.status;switch(n){case"SET_AUTHENTICATED":return a;default:return e}},loginStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LOGIN";switch((arguments.length>1?arguments[1]:void 0).type){case"LOGIN_REQUESTED":return"CHECKING";case"LOGIN_FAILURE":return"INCORRECT CREDENTIALS";case"LOGIN_SUCCESS":return"SUCCESS";case"LOGOUT_SUCCESS":default:return e}}}),x=Object(d.c)({session:S,userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.info;switch(n){case"SAVE_USER_INFO":return a;default:return e}}}),T=n(45),_=n(38),j=function(e){return{type:"CREATE_COLUMN_SUCCESS",data:e}},y=function(e){return{type:"CREATE_COLUMN_FAILURE",data:e}},C=function(e){return{type:"ADD_THOUGHT_SUCCESS",data:e}},U=function(e){return{type:"ADD_THOUGHT_FAILURE",data:e}},D=function(e){return{type:"EDIT_THOUGHT_SUCCESS",data:e}},N=function(e){return{type:"EDIT_THOUGHT_FAILURE",data:e}},I=function(e){return{type:"DEL_THOUGHT_SUCCESS",data:e}},w=function(e){return{type:"DEL_THOUGHT_FAILURE",data:e}},L=function(e){return{type:"FETCH_COLUMN_REQUESTED",data:e}},R=function(e){return{type:"FETCH_COLUMN_SUCCESS",data:e}},k=function(e){return{type:"FETCH_COLUMN_FAILURE",data:e}},A=Object(d.c)({currRoot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"FETCH_COLUMN_SUCCESS":return a.id;default:return e}},currColumnText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"FETCH_COLUMN_SUCCESS":return a.children.map(function(e){return e.content.text});case"ADD_THOUGHT_SUCCESS":return[].concat(e,a.text);case"DEL_THOUGHT_SUCCESS":return[].concat(e.slice(0,a.index),e.slice(a.index+1));case"EDIT_THOUGHT_SUCCESS":return Object.assign(Object(_.a)(e),Object(T.a)({},a.index,a.text));default:return e}}}),H=Object(d.c)({currentUser:x,data:A}),G=n(8),P=n.n(G),F=n(4),Q=function(){return u.Auth.currentSession().catch(function(e){"No current user"!==e&&console.warn("No session"),console.warn(e)})},M=function(e,t){return u.Auth.signIn(e,t).catch(function(e){console.warn(e.message)})},K=function(){return u.Auth.signOut().catch(function(e){console.warn(e.message)})},J=function(){return u.API.post("users","/users",{}).catch(function(e){console.warn(e.message)})},V=function(e){return u.API.get("users","/users",{}).catch(function(e){console.warn(e.message)})},q=P.a.mark(B),z=P.a.mark(W),X=P.a.mark(Z),Y=P.a.mark($);function B(){var e;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(F.b)(Q);case 3:if(!t.sent){t.next=16;break}return t.next=7,Object(F.c)(f(!0));case 7:return t.next=9,Object(F.c)(O());case 9:return t.next=11,Object(F.b)($);case 11:return e=t.sent,t.next=14,Object(F.c)(L({id:e.thoughtRoot}));case 14:t.next=18;break;case 16:return t.next=18,Object(F.c)(O());case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(0),console.error(t.t0.message),"No current user"!==t.t0&&console.warn("No session");case 24:case"end":return t.stop()}},q,this,[[0,20]])}function W(e){var t,n;return P.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.email,n=e.password,t&&n){a.next=3;break}return a.abrupt("return");case 3:return a.prev=3,a.next=6,Object(F.b)(M,t,n);case 6:if(!a.sent){a.next=14;break}return a.next=10,Object(F.c)(b());case 10:return a.next=12,Object(F.c)(p());case 12:a.next=16;break;case 14:return a.next=16,Object(F.c)(m());case 16:a.next=23;break;case 18:return a.prev=18,a.t0=a.catch(3),console.error(a.t0.message),a.next=23,Object(F.c)(m());case 23:case"end":return a.stop()}},z,this,[[3,18]])}function Z(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(F.b)(K);case 3:return e.next=5,Object(F.c)(f(!1));case 5:return e.next=7,Object(F.c)(v());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}},X,this,[[0,9]])}function $(){var e;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(F.b)(V);case 3:if(e=t.sent){t.next=9;break}return t.next=7,Object(F.b)(J);case 7:t.next=12;break;case 9:return t.next=11,Object(F.c)(g(e));case 11:return t.abrupt("return",e);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0.message);case 17:case"end":return t.stop()}},Y,this,[[0,14]])}var ee=[Object(F.d)("LOAD_SESSION_REQUESTED",B),Object(F.d)("LOGIN_REQUESTED",W),Object(F.d)("LOGOUT_REQUESTED",Z)],te=function(e,t){return u.API.post("thoughts","/thoughts",{body:{id:e,text:t}}).catch(function(e){console.warn(e||e.message)})},ne=function(e,t){return u.API.put("thoughts","/thoughts/".concat(e),{body:{action:"add",text:t}}).catch(function(e){console.warn(e||e.message)})},ae=function(e,t){return u.API.put("thoughts","/thoughts/".concat(e),{body:{action:"delete",index:t}}).catch(function(e){console.warn(e||e.message)})},re=function(e,t,n){return u.API.put("thoughts","/thoughts/".concat(e),{body:{action:"update",index:t,text:n}}).catch(function(e){console.warn(e||e.message)})},ce=function(e){return u.API.get("thoughts","/thoughts/".concat(e)).catch(function(e){console.warn(e.message)})},oe=P.a.mark(he),ue=P.a.mark(de),se=P.a.mark(Ee),ie=P.a.mark(fe),le=P.a.mark(pe);function he(e){var t,n,a,r;return P.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.data,n=t.thoughtRoot,a=t.text,c.prev=1,c.next=4,Object(F.b)(te,n,a);case 4:return r=c.sent,c.next=7,Object(F.c)(j(r));case 7:c.next=14;break;case 9:return c.prev=9,c.t0=c.catch(1),console.error(c.t0.message),c.next=14,Object(F.c)(y());case 14:case"end":return c.stop()}},oe,this,[[1,9]])}function de(e){var t,n,a;return P.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.data,n=t.id,a=t.text,r.prev=1,r.next=4,Object(F.b)(ne,n,a);case 4:return r.next=6,Object(F.c)(C(n,a));case 6:r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(1),console.error(r.t0.message),r.next=13,Object(F.c)(U());case 13:case"end":return r.stop()}},ue,this,[[1,8]])}function Ee(e){var t,n,a,r;return P.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.data,n=t.id,a=t.index,r=t.text,c.prev=1,c.next=4,Object(F.b)(re,n,a,r);case 4:return c.next=6,Object(F.c)(D({id:n,index:a,text:r}));case 6:c.next=13;break;case 8:return c.prev=8,c.t0=c.catch(1),console.error(c.t0.message),c.next=13,Object(F.c)(N());case 13:case"end":return c.stop()}},se,this,[[1,8]])}function fe(e){var t,n,a;return P.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.data,n=t.id,a=t.index,r.prev=1,r.next=4,Object(F.b)(ae,n,a);case 4:return r.next=6,Object(F.c)(I({id:n,index:a}));case 6:r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(1),console.error(r.t0.message),r.next=13,Object(F.c)(w());case 13:case"end":return r.stop()}},ie,this,[[1,8]])}function pe(e){var t,n;return P.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.data.id,a.prev=1,a.next=4,Object(F.b)(ce,t);case 4:return n=a.sent,a.next=7,Object(F.c)(R(n));case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(1),console.error(a.t0.message),a.next=14,Object(F.c)(k());case 14:case"end":return a.stop()}},le,this,[[1,9]])}var Oe=[Object(F.d)("CREATE_COLUMN_REQUESTED",he),Object(F.d)("ADD_THOUGHT_REQUESTED",de),Object(F.d)("EDIT_THOUGHT_REQUESTED",Ee),Object(F.d)("DEL_THOUGHT_REQUESTED",fe),Object(F.d)("FETCH_COLUMN_REQUESTED",pe)],be=P.a.mark(me);function me(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.a)([].concat(Object(_.a)(ee),Object(_.a)(Oe)));case 2:case"end":return e.stop()}},be,this)}var ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,ge=function(e){var t=Object(E.a)(),n=Object(d.e)(H,e,ve(Object(d.a)(t)));return t.run(me),n},Se=(n(303),n(305),n(22)),xe=n(23),Te=n(25),_e=n(24),je=n(26),ye=n(323),Ce=n(325),Ue=n(324),De=n(322),Ne=function(e){function t(){return Object(Se.a)(this,t),Object(Te.a)(this,Object(_e.a)(t).apply(this,arguments))}return Object(je.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){return this.props.authenticated?r.a.createElement(De.a,{to:"/dash"}):r.a.createElement(De.a,{to:"/login"})}}]),t}(a.Component),Ie=Object(i.b)(function(e){return{authenticated:e.currentUser.authenticated}})(Ne),we=n(321),Le=(n(308),function(e){function t(e){var n;return Object(Se.a)(this,t),(n=Object(Te.a)(this,Object(_e.a)(t).call(this,e))).handleEntry=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(T.a)({},"".concat(a),r))},n.handleSubmit=function(e){e.preventDefault();var t=n.props.login,a=n.state,r=a.email,c=a.password;r&&c&&t(r,c)},n.state={email:"",password:""},n}return Object(je.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=this.props,c=a.loginStatus;return a.authenticated?r.a.createElement(we.a,{to:"/dash"}):r.a.createElement("div",{className:"login-container"},r.a.createElement("h1",null,"trickl"),r.a.createElement("h5",null,"placeholder logo"),r.a.createElement("div",{className:"login-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleEntry,autoFocus:!0})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleEntry})),r.a.createElement("div",{className:"login-actions"},r.a.createElement("input",{className:"button",type:"submit",value:c}),r.a.createElement("button",{className:"button-secondary"},"Sign Up")))),r.a.createElement("div",{className:"login-footer"},r.a.createElement("a",{href:"https://github.com/keytrain/trickl"},"github"),"thanks for visiting"))}}]),t}(a.Component)),Re=Object(i.b)(function(e){var t=e.currentUser.session;return{authenticated:t.authenticated,loginStatus:t.loginStatus}},function(e){return{setAuth:function(t){return e(f(t))},login:function(t,n){return e(function(e,t){return{type:"LOGIN_REQUESTED",email:e,password:t}}(t,n))}}})(Le),ke=(n(310),function(e){function t(e){var n;return Object(Se.a)(this,t),(n=Object(Te.a)(this,Object(_e.a)(t).call(this,e))).saveEntry=function(){var e=n.props,t=e.parentId;(0,e.editThought)(t,e.index,n.state.draft),n.setState({dirty:!1})},n.resetEntry=function(){var e=n.props.thought;n.setState({draft:e,dirty:!1})},n.handleEntry=function(e){var t=e.target.value;n.refreshHeight(),n.setState({draft:t,dirty:!0})},n.deleteEntry=function(){var e=n.props,t=e.parentId;(0,e.delThought)(t,e.index)},n.handleKeyDown=function(e){var t=n.textArea.current.selectionStart,a=n.textArea.current.selectionEnd;if(e.ctrlKey)switch(e.keyCode){case 83:e.preventDefault(),n.saveEntry();break;case 88:e.preventDefault()}9===e.keyCode&&(e.preventDefault(),t===a&&n.insertTab(2))},n.insertTab=function(e){document.execCommand("insertText",!1,"  ")},n.state={draft:e.thought,dirty:!1,focus:!1},n.textArea=r.a.createRef(),n}return Object(je.a)(t,e),Object(xe.a)(t,[{key:"componentDidMount",value:function(){this.refreshHeight()}},{key:"refreshHeight",value:function(){this.textArea.current.style.height="auto";var e=this.textArea.current.scrollHeight;this.textArea.current.style.height=e+"px"}},{key:"render",value:function(){var e=this.state,t=e.draft,n=e.dirty;return r.a.createElement("div",{className:"entry-container"},r.a.createElement("textarea",{ref:this.textArea,rows:"1",className:"entry",onChange:this.handleEntry,value:t,autoCapitalize:"none",spellCheck:"false",onKeyDown:this.handleKeyDown}),r.a.createElement("div",{className:"entry-actions"},n&&r.a.createElement(a.Fragment,null,r.a.createElement("button",{className:"button-secondary",onClick:this.resetEntry},"Cancel"),r.a.createElement("button",{className:"button-secondary",onClick:this.deleteEntry},"Delete"),r.a.createElement("button",{className:"button-secondary",onClick:this.saveEntry},"Save"))))}}]),t}(a.Component)),Ae=Object(i.b)(null,function(e){return{editThought:function(t,n,a){return e({type:"EDIT_THOUGHT_REQUESTED",data:{id:t,index:n,text:a}})},delThought:function(t,n){return e({type:"DEL_THOUGHT_REQUESTED",data:{id:t,index:n}})}}})(ke),He=(n(312),function(e){function t(e){var n;return Object(Se.a)(this,t),(n=Object(Te.a)(this,Object(_e.a)(t).call(this,e))).addMessage=function(){},n.addThought=function(){var e=n.props;(0,e.addThought)(e.thoughtRoot," ")},n.state={},n}return Object(je.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.thoughtRoot,n=e.currColumnText;return r.a.createElement("div",null,n?r.a.createElement(a.Fragment,null,r.a.createElement("div",null,n.map(function(e,n){return r.a.createElement(Ae,{parentId:t,thought:e,index:n,key:n})})),r.a.createElement("div",{className:"add-thought-icon"},r.a.createElement("button",{className:"button-secondary",onClick:this.addThought},"+"))):r.a.createElement("div",{className:"loading-content"},"Loading thoughts..."))}}]),t}(a.Component)),Ge=Object(i.b)(function(e){var t=e.currentUser.userData.thoughtRoot;return{currColumnText:e.data.currColumnText,thoughtRoot:t}},function(e){return{addThought:function(t,n){return e({type:"ADD_THOUGHT_REQUESTED",data:{id:t,text:n}})}}})(He),Pe=(n(314),function(e){function t(e){var n;return Object(Se.a)(this,t),(n=Object(Te.a)(this,Object(_e.a)(t).call(this,e))).handleLogout=function(e){e.preventDefault(),(0,n.props.logout)()},n.state={isProfileOpen:!1},n}return Object(je.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.authenticated,a=t.thoughtRoot,c=this.state.isProfileOpen;return n?r.a.createElement("div",{className:"wrapper"},r.a.createElement("nav",null,r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"avatar",onClick:function(){return e.setState({isProfileOpen:!c})}}))),c&&r.a.createElement("div",{className:"profile-actions"},r.a.createElement("button",{onClick:this.handleLogout,className:"button-secondary"},"logout")),r.a.createElement("div",{className:"content"},a&&r.a.createElement(Ge,{root:a}))):r.a.createElement(we.a,{to:"/login"})}}]),t}(a.Component)),Fe=Object(i.b)(function(e){var t=e.currentUser,n=t.session.authenticated,a=t.userData;return{authenticated:n,thoughtRoot:a&&a.thoughtRoot}},function(e){return{setAuth:function(t){return e(f(t))},logout:function(){return e({type:"LOGOUT_REQUESTED"})}}})(Pe),Qe=function(){return r.a.createElement("div",{className:"fourohfour"},r.a.createElement("div",{className:"fourohfour-content"},"Page not found."))},Me=(n(316),function(e){function t(){return Object(Se.a)(this,t),Object(Te.a)(this,Object(_e.a)(t).apply(this,arguments))}return Object(je.a)(t,e),Object(xe.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.init)()}},{key:"render",value:function(){var e=this.props.isLoadingSession;return r.a.createElement(ye.a,null,e?r.a.createElement("div",{className:"loading-content"},"Checking Session..."):r.a.createElement(Ce.a,null,r.a.createElement(Ue.a,{exact:!0,path:"/",component:Ie}),r.a.createElement(Ue.a,{path:"/dash",component:Fe}),r.a.createElement(Ue.a,{path:"/login",component:Re}),r.a.createElement(Ue.a,{component:Qe})))}}]),t}(a.Component)),Ke=Object(i.b)(function(e){return{isLoadingSession:e.currentUser.session.loading}},function(e){return{init:function(){return e(p())}}})(Me);s.a.configure({Auth:{mandatorySignIn:!0,region:h.REGION,userPoolId:h.USER_POOL_ID,identityPoolId:h.IDENTITY_POOL_ID,userPoolWebClientId:h.APP_CLIENT_ID},API:{endpoints:[{name:"users",endpoint:l.URL,region:l.REGION},{name:"thoughts",endpoint:l.URL,region:l.REGION}]}});var Je=ge();o.a.render(r.a.createElement(i.a,{store:Je},r.a.createElement("div",null,r.a.createElement(Ke,null))),document.getElementById("root"))},52:function(e,t){}},[[119,2,1]]]);