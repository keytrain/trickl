(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{267:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=267},268:function(e,t,n){},278:function(e,t,n){e.exports=n(747)},728:function(e,t,n){var r={"./diff_match_patch_uncompressed":266,"./diff_match_patch_uncompressed.js":266};function a(e){var t=c(e);return n(t)}function c(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id=728},736:function(e,t,n){},739:function(e,t,n){},741:function(e,t,n){},744:function(e,t,n){},747:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(148),o=n.n(c),s=n(29),u=n.n(s),i=n(16),l={REGION:"us-west-1",URL:"https://fbj97y4ndj.execute-api.us-west-1.amazonaws.com/prod"},h={REGION:"us-west-2",USER_POOL_ID:"us-west-2_f9b0JeeMD",APP_CLIENT_ID:"7st7lq4rb5iuqc5uj3bcttimmo",IDENTITY_POOL_ID:"us-west-2:54671dce-0a57-4b44-a212-1d8cf1b2f359"},E=n(20),f=n(275),d=n(150),p=n(271),O=n.n(p),m=n(272),b=n.n(m),v=(Object(d.createDevTools)(a.a.createElement(O.a,{toggleVisibilityKey:"ctrl-h",changePositionKey:"ctrl-q",defaultIsVisible:!1},a.a.createElement(b.a,{theme:"tomorrow"}))),function(e){return{type:"SET_AUTHENTICATED",status:e}}),g=function(){return{type:"LOAD_SESSION_REQUESTED"}},S=function(){return{type:"LOAD_SESSION_COMPLETED"}},T=function(){return{type:"LOGIN_SUCCESS"}},_=function(){return{type:"LOGIN_FAILURE"}},j=function(){return{type:"LOGOUT_SUCCESS"}},C=function(e){return{type:"SAVE_USER_INFO",info:e}},y=Object(E.c)({loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"LOAD_SESSION_REQUESTED":return!0;case"LOAD_SESSION_COMPLETED":return!1;default:return e}},authenticated:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.status;switch(n){case"SET_AUTHENTICATED":return r;default:return e}},loginStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LOGIN";switch((arguments.length>1?arguments[1]:void 0).type){case"LOGIN_REQUESTED":return"CHECKING";case"LOGIN_FAILURE":return"INCORRECT CREDENTIALS";case"LOGIN_SUCCESS":return"SUCCESS";case"LOGOUT_SUCCESS":default:return e}}}),U=Object(E.c)({session:y,userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.info;switch(n){case"SAVE_USER_INFO":return r;default:return e}}}),x=function(e){return{type:"CREATE_THOUGHT_SUCCESS",data:e}},N=function(e){return{type:"CREATE_THOUGHT_FAILURE",data:e}},w=function(e){return{type:"FETCH_THOUGHT_REQUESTED",data:e}},I=function(e){return{type:"FETCH_THOUGHT_SUCCESS",data:e}},R=function(e){return{type:"FETCH_THOUGHT_FAILURE",data:e}},D=Object(E.c)({rawColumn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;switch(n){case"CREATE_THOUGHT_SUCCESS":case"FETCH_THOUGHT_SUCCESS":return r;default:return e}},currRoot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;switch(n){case"CREATE_THOUGHT_SUCCESS":case"FETCH_THOUGHT_SUCCESS":return r.id;default:return e}},currColumnText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data;switch(n){case"CREATE_THOUGHT_SUCCESS":case"FETCH_THOUGHT_SUCCESS":return r.children.map(function(e){return e.content.text});default:return e}}}),k=Object(E.c)({currentUser:U,data:D}),H=n(14),A=n.n(H),L=n(153),G=n(7),P=function(){return s.Auth.currentSession().catch(function(e){"No current user"!==e&&console.warn("No session"),console.warn(e)})},F=function(e,t){return s.Auth.signIn(e,t).catch(function(e){console.warn(e.message)})},Q=function(){return s.Auth.signOut().catch(function(e){console.warn(e.message)})},M=function(){return s.API.post("users","/users",{}).catch(function(e){console.warn(e.message)})},V=function(e){return s.API.get("users","/users",{}).catch(function(e){console.warn(e.message)})},q=A.a.mark(Y),J=A.a.mark(z),K=A.a.mark(B),X=A.a.mark(W);function Y(){var e;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(G.b)(P);case 3:if(!t.sent){t.next=16;break}return t.next=7,Object(G.c)(v(!0));case 7:return t.next=9,Object(G.c)(S());case 9:return t.next=11,Object(G.b)(W);case 11:return e=t.sent,t.next=14,Object(G.c)(w({id:e.thoughtRoot}));case 14:t.next=18;break;case 16:return t.next=18,Object(G.c)(S());case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(0),console.error(t.t0.message),"No current user"!==t.t0&&console.warn("No session");case 24:case"end":return t.stop()}},q,this,[[0,20]])}function z(e){var t,n;return A.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.email,n=e.password,t&&n){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,r.next=6,Object(G.b)(F,t,n);case 6:if(!r.sent){r.next=14;break}return r.next=10,Object(G.c)(T());case 10:return r.next=12,Object(G.c)(g());case 12:r.next=16;break;case 14:return r.next=16,Object(G.c)(_());case 16:r.next=23;break;case 18:return r.prev=18,r.t0=r.catch(3),console.error(r.t0.message),r.next=23,Object(G.c)(_());case 23:case"end":return r.stop()}},J,this,[[3,18]])}function B(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(G.b)(Q);case 3:return e.next=5,Object(G.c)(v(!1));case 5:return e.next=7,Object(G.c)(j());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}},K,this,[[0,9]])}function W(){var e;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(G.b)(V);case 3:if(e=t.sent){t.next=9;break}return t.next=7,Object(G.b)(M);case 7:t.next=12;break;case 9:return t.next=11,Object(G.c)(C(e));case 11:return t.abrupt("return",e);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0.message);case 17:case"end":return t.stop()}},X,this,[[0,14]])}var Z=[Object(G.d)("LOAD_SESSION_REQUESTED",Y),Object(G.d)("LOGIN_REQUESTED",z),Object(G.d)("LOGOUT_REQUESTED",B)],$=function(e,t){return s.API.post("thoughts","/thoughts",{body:{rootId:e,text:t}}).catch(function(e){console.warn(e||e.message)})},ee=function(e){return s.API.get("thoughts","/thoughts/".concat(e),{}).catch(function(e){console.warn(e.message)})},te=A.a.mark(re),ne=A.a.mark(ae);function re(e){var t,n,r,a;return A.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.data,n=t.thoughtRoot,r=t.text,c.prev=1,c.next=4,Object(G.b)($,n,r);case 4:return a=c.sent,c.next=7,Object(G.c)(x(a));case 7:c.next=14;break;case 9:return c.prev=9,c.t0=c.catch(1),console.error(c.t0.message),c.next=14,Object(G.c)(N());case 14:case"end":return c.stop()}},te,this,[[1,9]])}function ae(e){var t,n;return A.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.data.id,r.prev=1,r.next=4,Object(G.b)(ee,t);case 4:return n=r.sent,r.next=7,Object(G.c)(I(n));case 7:r.next=14;break;case 9:return r.prev=9,r.t0=r.catch(1),console.error(r.t0.message),r.next=14,Object(G.c)(R());case 14:case"end":return r.stop()}},ne,this,[[1,9]])}var ce=[Object(G.d)("CREATE_THOUGHT_REQUESTED",re),Object(G.d)("FETCH_THOUGHT_REQUESTED",ae)],oe=A.a.mark(se);function se(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.a)([].concat(Object(L.a)(Z),Object(L.a)(ce)));case 2:case"end":return e.stop()}},oe,this)}var ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||E.d,ie=function(e){var t=Object(f.a)(),n=Object(E.e)(k,e,ue(Object(E.a)(t)));return t.run(se),n},le=(n(734),n(736),n(24)),he=n(25),Ee=n(27),fe=n(26),de=n(28),pe=n(751),Oe=n(753),me=n(752),be=n(750),ve=function(e){function t(){return Object(le.a)(this,t),Object(Ee.a)(this,Object(fe.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(he.a)(t,[{key:"render",value:function(){return this.props.authenticated?a.a.createElement(be.a,{to:"/dash"}):a.a.createElement(be.a,{to:"/login"})}}]),t}(r.Component),ge=Object(i.connect)(function(e){return{authenticated:e.currentUser.authenticated}})(ve),Se=n(273),Te=n(749),_e=(n(739),function(e){function t(e){var n;return Object(le.a)(this,t),(n=Object(Ee.a)(this,Object(fe.a)(t).call(this,e))).handleEntry=function(e){var t=e.target,r=t.name,a=t.value;n.setState(Object(Se.a)({},"".concat(r),a))},n.handleSubmit=function(e){e.preventDefault();var t=n.props.login,r=n.state,a=r.email,c=r.password;a&&c&&t(a,c)},n.state={email:"",password:""},n}return Object(de.a)(t,e),Object(he.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,r=this.props,c=r.loginStatus;return r.authenticated?a.a.createElement(Te.a,{to:"/dash"}):a.a.createElement("div",{className:"login-container"},a.a.createElement("h1",null,"trickl"),a.a.createElement("h5",null,"placeholder logo"),a.a.createElement("div",{className:"login-form"},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("div",{className:"input-group"},a.a.createElement("label",null,"Email"),a.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleEntry,autoFocus:!0})),a.a.createElement("div",{className:"input-group"},a.a.createElement("label",null,"Password"),a.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleEntry})),a.a.createElement("div",{className:"login-actions"},a.a.createElement("input",{className:"button",type:"submit",value:c}),a.a.createElement("button",{className:"button-secondary"},"Sign Up")))),a.a.createElement("div",{className:"login-footer"},a.a.createElement("a",{href:"https://github.com/keytrain/trickl"},"github"),"thanks for visiting"))}}]),t}(r.Component)),je=Object(i.connect)(function(e){var t=e.currentUser.session;return{authenticated:t.authenticated,loginStatus:t.loginStatus}},function(e){return{setAuth:function(t){return e(v(t))},login:function(t,n){return e(function(e,t){return{type:"LOGIN_REQUESTED",email:e,password:t}}(t,n))}}})(_e),Ce=(n(741),function(e){function t(e){var n;return Object(le.a)(this,t),(n=Object(Ee.a)(this,Object(fe.a)(t).call(this,e))).saveEntry=function(){var e=n.props,t=e.parentId;(0,e.createThought)(t,n.state.draft),n.setState({dirty:!1})},n.resetEntry=function(){n.setState({draft:"",dirty:!1})},n.handleEntry=function(e){var t=e.target.value;n.refreshHeight(),n.setState({draft:t,dirty:!0})},n.state={draft:"",dirty:!1},n.textArea=a.a.createRef(),n}return Object(de.a)(t,e),Object(he.a)(t,[{key:"componentDidMount",value:function(){this.refreshHeight()}},{key:"componentDidUpdate",value:function(){this.props.thought}},{key:"refreshHeight",value:function(){this.textArea.current.style.height="auto";var e=this.textArea.current.scrollHeight;this.textArea.current.style.height=e+"px"}},{key:"render",value:function(){var e=this.props.thought,t=this.state,n=t.draft,r=t.dirty;return a.a.createElement("div",{className:"entry-container"},a.a.createElement("textarea",{ref:this.textArea,rows:"1",className:"entry",onChange:this.handleEntry,value:r?n:e}),r&&a.a.createElement("div",{className:"entry-actions"},a.a.createElement("button",{className:"button-secondary",onClick:this.resetEntry},"Cancel"),a.a.createElement("button",{className:"button-secondary",onClick:this.saveEntry},"Save")))}}]),t}(r.Component)),ye=Object(i.connect)(null,function(e){return{createThought:function(t,n){return e({type:"CREATE_THOUGHT_REQUESTED",data:{thoughtRoot:t,text:n}})}}})(Ce),Ue=(n(268),function(e){function t(e){var n;return Object(le.a)(this,t),(n=Object(Ee.a)(this,Object(fe.a)(t).call(this,e))).addMessage=function(){},n.state={},n}return Object(de.a)(t,e),Object(he.a)(t,[{key:"render",value:function(){var e=this.props,t=e.thoughtRoot,n=e.currColumnText;return a.a.createElement("div",null,n&&n.map(function(e,n){return a.a.createElement(ye,{parentId:t,thought:e,key:n})}))}}]),t}(r.Component)),xe=Object(i.connect)(function(e){var t=e.currentUser.userData.thoughtRoot,n=e.data.currColumnText;return console.log(n),{currColumnText:n,thoughtRoot:t}})(Ue),Ne=function(e){function t(e){var n;return Object(le.a)(this,t),(n=Object(Ee.a)(this,Object(fe.a)(t).call(this,e))).handleLogout=function(e){e.preventDefault(),(0,n.props.logout)()},n.state={isProfileOpen:!1},n}return Object(de.a)(t,e),Object(he.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.authenticated,r=t.thoughtRoot,c=this.state.isProfileOpen;return n?a.a.createElement("div",{className:"wrapper"},a.a.createElement("nav",null,a.a.createElement("div",{className:"user"},a.a.createElement("div",{className:"avatar",onClick:function(){return e.setState({isProfileOpen:!c})}}))),c&&a.a.createElement("div",{className:"profile-actions"},a.a.createElement("button",{onClick:this.handleLogout,className:"button-secondary"},"logout")),a.a.createElement("div",{className:"content"},r&&a.a.createElement(xe,{root:r}))):a.a.createElement(Te.a,{to:"/login"})}}]),t}(r.Component),we=Object(i.connect)(function(e){var t=e.currentUser,n=t.session.authenticated,r=t.userData;return{authenticated:n,thoughtRoot:r&&r.thoughtRoot}},function(e){return{setAuth:function(t){return e(v(t))},logout:function(){return e({type:"LOGOUT_REQUESTED"})}}})(Ne),Ie=function(){return a.a.createElement("div",{className:"fourohfour"},a.a.createElement("div",{className:"fourohfour-content"},"Page not found."))},Re=(n(744),function(e){function t(){return Object(le.a)(this,t),Object(Ee.a)(this,Object(fe.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(he.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.init)()}},{key:"render",value:function(){var e=this.props.isLoadingSession;return a.a.createElement(pe.a,null,e?a.a.createElement("div",{className:"loading-content"},"Checking Session..."):a.a.createElement(Oe.a,null,a.a.createElement(me.a,{exact:!0,path:"/",component:ge}),a.a.createElement(me.a,{path:"/dash",component:we}),a.a.createElement(me.a,{path:"/login",component:je}),a.a.createElement(me.a,{component:Ie})))}}]),t}(r.Component)),De=Object(i.connect)(function(e){return{isLoadingSession:e.currentUser.session.loading}},function(e){return{init:function(){return e(g())}}})(Re);u.a.configure({Auth:{mandatorySignIn:!0,region:h.REGION,userPoolId:h.USER_POOL_ID,identityPoolId:h.IDENTITY_POOL_ID,userPoolWebClientId:h.APP_CLIENT_ID},API:{endpoints:[{name:"users",endpoint:l.URL,region:l.REGION},{name:"thoughts",endpoint:l.URL,region:l.REGION}]}});var ke=ie();o.a.render(a.a.createElement(i.Provider,{store:ke},a.a.createElement("div",null,a.a.createElement(De,null))),document.getElementById("root"))},93:function(e,t){}},[[278,2,1]]]);